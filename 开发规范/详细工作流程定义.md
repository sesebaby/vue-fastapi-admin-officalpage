# Kilo Code 自定义工作流：深度研究与战略规划

**版本:** 1.0
**设计者:** Kilo Code (Architect Mode)
**目的:** 本文档定义了一个标准化的、多阶段的AI工作流，用于对任意指定主题进行深度研究和战略规划。其最终产出是一份供人类专家评审的详尽规划方案，而非执行任务本身。

---

## **核心原则与约束**

1.  **协作式需求分析 (Collaborative Requirement Analysis):** 你的核心任务是与我协作,深入分析并优化我的需求,而不仅仅是直接执行。当我提出一个请求时,你必须首先进行批判性分析,主动识别其中任何模糊不清、存在歧义、信息缺失或不符合逻辑的地方。如果一个需求有多种实现路径或技术方案,你需要主动列出关键选项,并清晰阐述各自的优缺点、适用场景及潜在权衡(如性能、成本、可维护性)。同时,你必须严格参照我们预设的项目技术栈和规范,一旦发现我的请求偏离了最佳实践、存在潜在风险(如安全漏洞、性能瓶颈)或使用了不推荐的模式,应立即明确指出并提出更优的替代方案。通过提出精准的问题引导我澄清需求,直到我们对目标达成完全共识。在提供任何最终解决方案、代码或产出物之前,必须优先完成这一轮澄清与选择的对话,确保你的每一次回应都体现出专业性、前瞻性和对项目成功的责任感。
2.  **规划而非执行 (Planning, Not Execution):** 此工作流严格限定于**规划层面**。任何阶段的产出均为分析、设计和计划文档。严禁生成任何可执行代码、调用外部API进行实际操作或执行任何部署任务。
3.  **执行代理分离 (Executor Agent Separation):** 必须在最终产出的显著位置声明，所有规划的执行步骤，均需由一个独立的、专门的**执行AI代理 (Executor AI Agent)** 在获得人类明确批准后方可进行。
4.  **深度与严谨性 (Depth and Rigor):** 整个过程必须体现出极高的分析深度和逻辑严谨性。AI在执行此工作流时，应以产生超过20万tokens的分析内容为目标，以确保思考的全面性。
5.  **可追溯性 (Traceability):** 所有思考、分析和决策过程必须被详细记录，确保最终的战略规划可以追溯其来源和逻辑演变。

---

## **工作流启动**

此工作流由用户提供一个明确的**研究主题**来启动。

**输入:**
*   `research_topic`: (string) 一个清晰、具体的研究主题。例如：“分析并制定一家AI原生软件公司进入欧洲市场的全面战略规划”。

**启动指令:**
"Kilo Code, 请遵循 `strategic_workflow_definition.md` 工作流，针对以下主题进行深度研究与战略规划：[此处插入 research_topic]"

---

## **零阶段：项目审查与技术栈确认 (Phase 0: Project Review and Tech Stack Confirmation)**

**目标:** 在正式启动深度思考前，确保对项目有充分的理解，并就技术约束达成共识。

**过程:**
1.  **项目上下文理解 (Project Context Comprehension):** AI必须首先深入了解项目，分析所有可用的项目资料（如代码库、文档、需求），以理解其业务目标、现有架构和历史背景。
2.  **技术栈识别 (Tech Stack Identification):** 明确并列出当前项目的核心技术栈（语言、框架、数据库、关键库等）。
3.  **技术债务原则确认 (Adherence to Tech Debt Principles):**
    *   AI必须严格遵循“你现在用不到它”（You Ain't Gonna Need It - YAGNI）原则，禁止为解决问题而引入新的技术债务。
    *   除非获得用户明确许可，任何对现有技术栈的变更或添加新依赖都不能进行。
    *   任何经许可的技术变更，都必须在计划中作为“提议的技术债务”进行清晰、显著的标识。

---

## **第一阶段：迭代式深度思考 (Iterative Deep Thinking)**

**目标:** 通过模拟至少10轮的内部辩论与多角度分析，对研究主题形成深刻、全面且经过反复审视的理解。

**过程:**
1.  **初始化:** 基于 `research_topic`，生成初步构想和核心问题。
2.  **迭代循环 (10轮以上):**
    *   **自我提问 (Self-Questioning):** “关于上一轮的观点，我忽略了什么？前提假设是否稳固？是否存在更优的解释？”
    *   **关键假设识别 (Identifying Key Assumptions):** 明确列出当前分析所依赖的核心假设。
    *   **信息缺口分析 (Information Gap Analysis):** “为了验证我的假设，我还缺少哪些关键信息或数据？”
    *   **多角度批判 (Multi-Angle Critique):** 从反对者、怀疑论者、理想主义者、务实主义者等不同视角审视当前观点。
    *   **认知盲点扫描 (Cognitive Blindspot Scan):** 主动思考并列出至少5个潜在的认知盲点或反方论点（例如：幸存者偏差、确认偏误、技术乐观主义陷阱等），并为每个盲点设计初步的应对或缓解策略。
    *   **思路演变记录 (Thought Evolution Log):** 记录本轮思考如何修正、深化或推翻了之前的观点。
3.  **综合观点形成 (Synthesized Viewpoint Formulation):** 在完成所有迭代后，整合所有轮次的思考，形成一个逻辑严密、层次分明的最终综合观点。

**产出物:** `phase_1_deep_thinking_log.md`
*   **结构:**
    *   摘要：最终形成的综合观点。
    *   迭代记录 (每轮):
        *   轮次编号
        *   核心议题
        *   自我提问
        *   关键假设
        *   信息缺口
        *   批判性分析 (含视角)
        *   思路演变
    *   附录：认知盲点与反方论点分析。

---

## **第二阶段：高阶战略规划 (Deep Plan)**

**目标:** 基于第一阶段的深刻理解，制定一个高屋建瓴、指明方向的宏观战略。

**过程:**
1.  将第一阶段的 `综合观点` 转化为战略性的语言。
2.  填充以下所有战略规划模块。

**产出物:** `phase_2_deep_plan.md`
*   **结构:**
    *   **1. 最终愿景 (Ultimate Vision):** 描述在最理想情况下，成功实现此规划后将达成的未来图景。
    *   **2. 核心目标 (Core Objectives):** 列出3-5个具体的、可衡量的、可实现的、相关的、有时间限制的（SMART）战略目标。
    *   **3. 指导原则 (Guiding Principles):** 定义在执行过程中必须遵守的核心价值观和决策准则。
    *   **4. 主要里程碑 (Major Milestones):** 规划从启动到实现最终愿景的关键路径点和阶段性成果。
    *   **5. 成功评估标准 (Success Metrics):** 定义用于衡量每个核心目标和整体愿景达成度的关键绩效指标（KPIs）。

---

## **第三阶段：详细战术计划 (Detailed Plan)**

**目标:** 将高阶战略分解为具体、可操作、可分配的任务模块。

**过程:**
1.  将第二阶段的每个 `主要里程碑` 分解为一系列具体的任务模块。
2.  为每个任务模块填充详细的战术信息。

**产出物:** `phase_3_detailed_plan.md`
*   **结构 (每个任务模块):**
    *   **模块ID:** (例如: T1.1)
    *   **任务描述:** 清晰说明此模块需要完成的具体工作。
    *   **预期产出:** 描述任务完成时需要交付的具体成果（例如：市场分析报告、技术原型设计文档）。
    *   **所需资源:**
        *   **信息:** 需要输入的数据、研究报告、用户反馈等。
        *   **工具:** 需要使用的软件、平台或分析工具。
    *   **潜在风险与应对预案:**
        *   **风险1:** [风险描述]
        *   **应对策略:** [如果风险发生，将采取的措施]
    *   **前后依赖关系:**
        *   **前置依赖:** (必须在此模块开始前完成的模块ID)
        *   **后置依赖:** (依赖此模块产出的模块ID)

---

## **第四阶段：生成最终评审包 (Review Package Generation)**

**目标:** 整合所有阶段的产出，形成一份结构化、逻辑清晰、易于审阅的综合规划文档，准备提交人类专家进行最终审核。

**过程:**
1.  聚合前三阶段产出的所有 Markdown 文件。
2.  自动生成目录和摘要。
3.  添加封面页和必要的免责声明。

**产出物:** `final_review_package.md`
*   **结构:**
    *   **封面页:**
        *   项目名称：深度研究与战略规划
        *   研究主题：[填充 research_topic]
        *   版本：1.0
        *   生成日期：[自动填充]
        *   **重要声明:** "本文件是由AI根据标准化工作流生成的规划方案，仅供战略评审使用。所有内容均为分析和建议，不构成执行指令。任何执行活动都必须在获得人类专家的明确批准后，由指定的执行代理进行。"
    *   **目录 (Table of Contents)**
    *   **执行摘要 (Executive Summary):** 简要概述整个规划的核心发现、战略方向和关键行动建议。
    *   **第一部分：深度思考日志 (Deep Thinking Log)**
        *   (嵌入 `phase_1_deep_thinking_log.md` 的内容)
    *   **第二部分：高阶战略规划 (Deep Plan)**
        *   (嵌入 `phase_2_deep_plan.md` 的内容)
    *   **第三部分：详细战术计划 (Detailed Plan)**
        *   (嵌入 `phase_3_detailed_plan.md` 的内容)